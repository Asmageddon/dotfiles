
if [[ ! -n $TERM_CHECK ]] ; then
	source ~/.shvars
fi

#Pull $TEXT_USERNAME, $TEXT_HOSTNAME and $TEXT_WORKING_DIRECTORY (and everything else along the way :3)

if [[ -n $COLOR_SUPPORT ]] ; then
	COLOR_DECORATION1='\e[0;31m'
	COLOR_DECORATION2='\e[0;35m'
	COLOR_DIRECTORY='\e[1;32m'
	COLOR_SHELL="\e[1;31m"
	NC='\e[0m' # No Color

	#Username color
	if [[ "$UID" == 0 ]] ; then
		COLOR_USERNAME='\e[0;31m'
	else
		COLOR_USERNAME='\e[0;32m'
	fi

	#Hostname color
	if [ -n "$SSH_CONNECTION" ] ; then
		# We're logged in remotely
		COLOR_HOSTNAME='\e[1;33m'
	else
		COLOR_HOSTNAME='\e[1;34m'
	fi
fi

TEXT_FRAME1="["
TEXT_FRAME2="]"
TEXT_IN=" in "
if [ -n "$UNICODE_SUPPORT" ] ; then # || [[ "$COLORTERM" != "" ]]
	#Gentlemen, we're dealing with something dangerous here!
	TEXT_AT='❤'
	DECOR_FRAME1="╔"
	DECOR_FRAME2="╚═> "
	DECOR_FRAME3="  > "
	DECOR_CHAR_ADDITIONAL="═"
else
	TEXT_AT='@'
	DECOR_FRAME1="┌"
	DECOR_FRAME2="└─> "
	DECOR_FRAME3="  > "
	DECOR_CHAR_ADDITIONAL="─"
fi

#Display visually which shell level we are in,
#   not because you need to know, but so you at
#   least can differentiate commands launched in
#   other shells and know when exitting won't log you out
_SHLVL=$SHLVL
while [[ $_SHLVL > 1 ]] ; do
	DECOR_FRAME1=$DECOR_FRAME1$DECOR_CHAR_ADDITIONAL;
	_SHLVL=$(($_SHLVL-1))
done

if [[ ! -n $NO_SET_PROMPT ]] ; then
	PS1="$DECOR_FRAME1\
$(echo $COLOR_DECORATION2)$TEXT_FRAME1\
$(echo $COLOR_USERNAME)$TEXT_USERNAME\
$(echo $COLOR_DECORATION1)$TEXT_AT\
$(echo $COLOR_HOSTNAME)$TEXT_HOSTNAME\
$(echo $COLOR_DECORATION2)$TEXT_FRAME2\
$(echo $NC)$TEXT_IN\
$(echo $COLOR_DIRECTORY)$TEXT_WORKING_DIRECTORY$(echo $NC)
$DECOR_FRAME2"
	PS2="$DECOR_FRAME3"
fi